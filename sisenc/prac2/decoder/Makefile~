CC=avr-gcc
CPPFLAGS=-DF_CPU=16000000UL
CFLAGS=-Wall -std=c99 -Os -mmcu=atmega328p -fshort-enums -Ilibpbn
LDFLAGS=-mmcu=atmega328p

vpath lib% libpbn


.PHONY: all
all: libpbn detector

detector: detector.o -lpbn

detector.o: detector.c


.PHONY: libpbn
libpbn:
	$(MAKE) -C libpbn


.PHONY: clean veryclean
clean:
	\rm -f *~ *.o *.s *.hex
	$(MAKE) -C libpbn clean

veryclean: clean
	\rm -f master2
	$(MAKE) -C libpbn veryclean
